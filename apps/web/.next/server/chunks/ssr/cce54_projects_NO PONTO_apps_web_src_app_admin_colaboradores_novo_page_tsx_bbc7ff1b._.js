module.exports=[71913,a=>{"use strict";var b=a.i(92713),c=a.i(98209),d=a.i(48947),e=a.i(32623),f=a.i(1833),g=a.i(57710),h=a.i(14879),i=a.i(11502),j=a.i(83052);let k=c.forwardRef(({className:a,checked:c,onCheckedChange:d,...e},f)=>(0,b.jsx)("button",{type:"button",role:"checkbox","aria-checked":c,ref:f,onClick:()=>d?.(!c),className:(0,j.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",c?"bg-primary text-primary-foreground":"border-input",a),...e,children:c&&(0,b.jsx)("span",{className:(0,j.cn)("flex items-center justify-center text-current"),children:(0,b.jsx)(i.Check,{className:"h-4 w-4"})})}));k.displayName="Checkbox";var l=a.i(51378),m=a.i(39287),n=a.i(9289),o=a.i(17588),p=a.i(12065),q=a.i(39789),r=a.i(52940);let s=[{id:1,title:"Dados Pessoais"},{id:2,title:"Dados Profissionais"},{id:3,title:"Jornada & Escala"},{id:4,title:"Regras de Ponto"},{id:5,title:"Documentos"}];function t(){let a=(0,r.useRouter)(),[j,t]=(0,c.useState)(1),[u,v]=(0,c.useState)({name:"",cpf:"",rg:"",birthDate:"",phone:"",email:"",address:"",position:"",department:"",function:"",admissionDate:"",contractType:"CLT",matricula:"",contractId:"",scheduleId:"",workLocationId:"",requirePhoto:!0,requireGPS:!0,allowManualEntry:!1}),[w,x]=(0,c.useState)([]),[y,z]=(0,c.useState)([]),[A,B]=(0,c.useState)([]),[C,D]=(0,c.useState)({}),[E,F]=(0,c.useState)(null);(0,c.useEffect)(()=>{G(),H()},[]),(0,c.useEffect)(()=>{u.contractId?(I(u.contractId),v(a=>({...a,workLocationId:""}))):(B([]),v(a=>({...a,workLocationId:""})))},[u.contractId]);let G=async()=>{try{let a=await fetch("http://localhost:4000/contratos"),b=await a.json();x(b)}catch(a){console.error("Failed to fetch contracts",a)}},H=async()=>{try{let a=await fetch("http://localhost:4000/escalas"),b=await a.json();z(b)}catch(a){console.error("Failed to fetch schedules",a)}},I=async a=>{try{let b=await fetch(`http://localhost:4000/postos?contractId=${a}`),c=await b.json();B(c)}catch(a){console.error("Failed to fetch locations",a)}},J=(a,b)=>{v(c=>({...c,[a]:b})),C[a]&&D(b=>{let c={...b};return delete c[a],c})},K=async()=>{try{let b={...u,personalEmail:u.email},c=await fetch("http://localhost:4000/colaboradores",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(c.ok)a.push("/admin/colaboradores");else{let a=await c.json().catch(()=>({})),b=Array.isArray(a.message)?a.message.join(", "):a.message||"Erro ao salvar colaborador. Verifique os dados e tente novamente.";F(b)}}catch(a){console.error(a),F("Erro de conexão ao salvar colaborador.")}};return(0,b.jsxs)("div",{className:"space-y-6 max-w-4xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(q.default,{href:"/admin/colaboradores",children:(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(m.ArrowLeft,{className:"h-4 w-4"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Novo Colaborador"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Cadastre um novo colaborador em 5 passos simples."})]})]}),(0,b.jsxs)("div",{className:"flex justify-between relative",children:[(0,b.jsx)("div",{className:"absolute top-1/2 left-0 w-full h-0.5 bg-slate-200 -z-10"}),s.map(a=>(0,b.jsxs)("div",{className:"flex flex-col items-center gap-2 bg-white px-2",children:[(0,b.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold transition-colors ${j>=a.id?"bg-blue-600 text-white":"bg-slate-100 text-slate-400"}`,children:j>a.id?(0,b.jsx)(i.Check,{className:"h-4 w-4"}):a.id}),(0,b.jsx)("span",{className:`text-xs font-medium ${j>=a.id?"text-blue-600":"text-slate-400"}`,children:a.title})]},a.id))]}),(0,b.jsx)(g.Card,{children:(0,b.jsxs)(g.CardContent,{className:"p-6",children:[E&&(0,b.jsxs)(l.Alert,{variant:"destructive",className:"mb-6",children:[(0,b.jsx)(p.AlertCircle,{className:"h-4 w-4"}),(0,b.jsx)(l.AlertTitle,{children:"Erro"}),(0,b.jsx)(l.AlertDescription,{children:E})]}),1===j&&(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{className:C.name?"text-red-500":"",children:"Nome Completo *"}),(0,b.jsx)(e.Input,{value:u.name,onChange:a=>J("name",a.target.value),className:C.name?"border-red-500":""}),C.name&&(0,b.jsx)("span",{className:"text-xs text-red-500",children:C.name})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{className:C.cpf?"text-red-500":"",children:"CPF *"}),(0,b.jsx)(e.Input,{value:u.cpf,onChange:a=>J("cpf",a.target.value),placeholder:"000.000.000-00",className:C.cpf?"border-red-500":""}),C.cpf&&(0,b.jsx)("span",{className:"text-xs text-red-500",children:C.cpf})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{children:"RG"}),(0,b.jsx)(e.Input,{value:u.rg,onChange:a=>J("rg",a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{children:"Data de Nascimento"}),(0,b.jsx)(e.Input,{type:"date",value:u.birthDate,onChange:a=>J("birthDate",a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{children:"Telefone / WhatsApp"}),(0,b.jsx)(e.Input,{value:u.phone,onChange:a=>J("phone",a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{className:C.email?"text-red-500":"",children:"E-mail Pessoal *"}),(0,b.jsx)(e.Input,{type:"email",value:u.email,onChange:a=>J("email",a.target.value),className:C.email?"border-red-500":""}),C.email&&(0,b.jsx)("span",{className:"text-xs text-red-500",children:C.email})]}),(0,b.jsxs)("div",{className:"col-span-2 space-y-2",children:[(0,b.jsx)(f.Label,{children:"Endereço Completo"}),(0,b.jsx)(e.Input,{value:u.address,onChange:a=>J("address",a.target.value)})]})]}),2===j&&(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{className:C.position?"text-red-500":"",children:"Cargo *"}),(0,b.jsx)(e.Input,{value:u.position,onChange:a=>J("position",a.target.value),className:C.position?"border-red-500":""}),C.position&&(0,b.jsx)("span",{className:"text-xs text-red-500",children:C.position})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{children:"Função"}),(0,b.jsx)(e.Input,{value:u.function,onChange:a=>J("function",a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{children:"Departamento"}),(0,b.jsx)(e.Input,{value:u.department,onChange:a=>J("department",a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{children:"Matrícula"}),(0,b.jsx)(e.Input,{value:u.matricula,onChange:a=>J("matricula",a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{className:C.admissionDate?"text-red-500":"",children:"Data de Admissão *"}),(0,b.jsx)(e.Input,{type:"date",value:u.admissionDate,onChange:a=>J("admissionDate",a.target.value),className:C.admissionDate?"border-red-500":""}),C.admissionDate&&(0,b.jsx)("span",{className:"text-xs text-red-500",children:C.admissionDate})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{children:"Tipo de Contrato"}),(0,b.jsxs)(h.Select,{value:u.contractType,onValueChange:a=>J("contractType",a),children:[(0,b.jsx)(h.SelectTrigger,{children:(0,b.jsx)(h.SelectValue,{})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"CLT",children:"CLT"}),(0,b.jsx)(h.SelectItem,{value:"PJ",children:"PJ"}),(0,b.jsx)(h.SelectItem,{value:"ESTAGIO",children:"Estágio"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{className:C.contractId?"text-red-500":"",children:"Contrato Vinculado *"}),(0,b.jsxs)(h.Select,{value:u.contractId,onValueChange:a=>J("contractId",a),children:[(0,b.jsx)(h.SelectTrigger,{className:C.contractId?"border-red-500":"",children:(0,b.jsx)(h.SelectValue,{placeholder:"Selecione um contrato"})}),(0,b.jsx)(h.SelectContent,{children:w.map(a=>(0,b.jsxs)(h.SelectItem,{value:a.id,children:[a.name," - ",a.client?.name]},a.id))})]}),C.contractId&&(0,b.jsx)("span",{className:"text-xs text-red-500",children:C.contractId})]})]}),3===j&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{className:C.scheduleId?"text-red-500":"",children:"Escala de Trabalho *"}),(0,b.jsxs)(h.Select,{value:u.scheduleId,onValueChange:a=>J("scheduleId",a),children:[(0,b.jsx)(h.SelectTrigger,{className:C.scheduleId?"border-red-500":"",children:(0,b.jsx)(h.SelectValue,{placeholder:"Selecione uma escala"})}),(0,b.jsx)(h.SelectContent,{children:y.map(a=>(0,b.jsxs)(h.SelectItem,{value:a.id,children:[a.name," (",a.type,")"]},a.id))})]}),C.scheduleId&&(0,b.jsx)("span",{className:"text-xs text-red-500",children:C.scheduleId})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{children:"Posto de Trabalho (Unidade)"}),(0,b.jsxs)(h.Select,{value:u.workLocationId,onValueChange:a=>J("workLocationId",a),disabled:!u.contractId,children:[(0,b.jsx)(h.SelectTrigger,{children:(0,b.jsx)(h.SelectValue,{placeholder:"Selecione um posto"})}),(0,b.jsx)(h.SelectContent,{children:0===A.length?(0,b.jsx)(h.SelectItem,{value:"disabled",disabled:!0,children:"Nenhum posto encontrado para este contrato"}):A.map(a=>(0,b.jsx)(h.SelectItem,{value:a.id,children:a.name},a.id))})]})]})]}),(0,b.jsx)("div",{className:"bg-slate-50 p-4 rounded-lg border text-sm text-slate-600",children:(0,b.jsx)("p",{children:"ℹ️ Selecione a escala para carregar automaticamente os horários de entrada, saída e intervalos."})})]}),4===j&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("h3",{className:"font-medium text-lg",children:"Regras de Validação"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(f.Label,{className:"text-base",children:"Exigir Foto"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"O colaborador deve tirar uma selfie a cada registro."})]}),(0,b.jsx)(k,{checked:u.requirePhoto,onCheckedChange:a=>J("requirePhoto",a)})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(f.Label,{className:"text-base",children:"Exigir Geolocalização (GPS)"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Obrigatório estar com GPS ativado."})]}),(0,b.jsx)(k,{checked:u.requireGPS,onCheckedChange:a=>J("requireGPS",a)})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(f.Label,{className:"text-base",children:"Permitir Ponto Manual"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Permite inserir ponto digitado (apenas em casos de emergência)."})]}),(0,b.jsx)(k,{checked:u.allowManualEntry,onCheckedChange:a=>J("allowManualEntry",a)})]})]})]}),5===j&&(0,b.jsxs)("div",{className:"space-y-6 text-center py-8",children:[(0,b.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-10 hover:bg-slate-50 transition-colors cursor-pointer",children:[(0,b.jsx)(o.Upload,{className:"h-10 w-10 mx-auto text-slate-400 mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium",children:"Upload de Documentos"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Arraste arquivos ou clique para selecionar"}),(0,b.jsx)("p",{className:"text-xs text-slate-400 mt-4",children:"Contrato, RG, CPF, Comprovante de Residência"})]}),(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsx)("h4",{className:"font-medium mb-2",children:"Arquivos selecionados:"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground italic",children:"Nenhum arquivo selecionado."})]})]})]})}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>{j>1&&t(a=>a-1)},disabled:1===j,children:"Anterior"}),(0,b.jsxs)(d.Button,{onClick:()=>{let a,b;a={},b=!0,1===j&&(u.name||(a.name="Nome é obrigatório"),u.cpf||(a.cpf="CPF é obrigatório"),u.email||(a.email="E-mail é obrigatório")),2===j&&(u.position||(a.position="Cargo é obrigatório"),u.contractId||(a.contractId="Contrato é obrigatório"),u.admissionDate||(a.admissionDate="Data de admissão é obrigatória")),3!==j||u.scheduleId||(a.scheduleId="Escala é obrigatória"),Object.keys(a).length>0&&(D(a),b=!1),b&&(j<5?t(a=>a+1):K())},className:"gap-2",children:[5===j?"Finalizar Cadastro":"Próximo",j<5&&(0,b.jsx)(n.ArrowRight,{className:"h-4 w-4"})]})]})]})}a.s(["default",()=>t],71913)}];

//# sourceMappingURL=cce54_projects_NO%20PONTO_apps_web_src_app_admin_colaboradores_novo_page_tsx_bbc7ff1b._.js.map