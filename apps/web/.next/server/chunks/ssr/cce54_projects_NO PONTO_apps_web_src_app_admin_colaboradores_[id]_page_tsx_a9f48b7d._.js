module.exports=[69775,a=>{"use strict";var b=a.i(92713),c=a.i(98209),d=a.i(246),e=a.i(48947),f=a.i(32623),g=a.i(1833),h=a.i(47433),i=a.i(38040),j=a.i(39287),k=a.i(69141),l=a.i(39786),m=a.i(77723),n=a.i(99601);let o=(0,n.default)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),p=(0,n.default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var q=a.i(17588),r=a.i(52704),s=a.i(29194),t=a.i(49317),u=a.i(55387),v=a.i(81999);let w=(0,n.default)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);var x=a.i(39789),y=a.i(52940);function z(){let a=(0,y.useParams)().id,[n,z]=(0,c.useState)(null),[A,B]=(0,c.useState)(!0),[C,D]=(0,c.useState)("personal"),[E,F]=(0,c.useState)([]),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)([]),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)(null),O=(0,c.useCallback)(async()=>{try{let b=await d.api.get(`/colaboradores/${a}`);z(b.data)}catch(a){console.error(a)}finally{B(!1)}},[a]),P=(0,c.useCallback)(async()=>{try{let b=await d.api.get(`/colaboradores/${a}/clt/resumo`);N(b.data)}catch(a){console.error("Failed to fetch CLT summary",a)}},[a]),Q=(0,c.useCallback)(async()=>{H(!0);try{let b=await d.api.get(`/colaboradores/${a}/pontos`);F(b.data)}catch(a){console.error("Failed to fetch time records",a)}finally{H(!1)}},[a]),R=(0,c.useCallback)(async()=>{L(!0);try{let b=await d.api.get(`/colaboradores/${a}/auditoria`);J(b.data)}catch(a){console.error("Failed to fetch audit logs",a)}finally{L(!1)}},[a]);(0,c.useEffect)(()=>{a&&(O(),P())},[a,O,P]),(0,c.useEffect)(()=>{"point"===C?Q():"audit"===C&&R()},[C,Q,R]);let S=async()=>{if(confirm("Tem certeza que deseja inativar este colaborador?"))try{await d.api.patch(`/colaboradores/${a}/status`,{status:"INATIVO"}),alert("Colaborador inativado com sucesso"),O()}catch(a){console.error(a),alert("Erro ao inativar colaborador")}};return A?(0,b.jsx)("div",{className:"p-8 text-center",children:"Carregando..."}):n?(0,b.jsxs)("div",{className:"space-y-6 relative",children:[(0,b.jsxs)("div",{className:"sticky top-0 z-10 bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/60 py-4 border-b mb-6 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(x.default,{href:"/admin/colaboradores",children:(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(j.ArrowLeft,{className:"h-4 w-4"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:n.name}),(0,b.jsxs)("div",{className:"flex gap-2 text-sm text-muted-foreground items-center",children:[(0,b.jsx)(h.Badge,{variant:"ATIVO"===n.status?"default":"secondary",className:"ATIVO"===n.status?"bg-green-600":"",children:n.status||"ATIVO"}),(0,b.jsx)("span",{children:"•"}),(0,b.jsx)("span",{children:n.position}),(0,b.jsx)("span",{children:"•"}),(0,b.jsxs)("span",{children:["Matrícula: ",n.matricula||"-"]})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(e.Button,{variant:"outline",className:"gap-2",title:"Ver Espelho de Ponto",onClick:()=>D("point"),children:[(0,b.jsx)(k.FileText,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Espelho"})]}),(0,b.jsxs)(e.Button,{variant:"outline",className:"gap-2",title:"Histórico de Alterações",onClick:()=>D("audit"),children:[(0,b.jsx)(o,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Histórico"})]}),(0,b.jsxs)(e.Button,{className:"gap-2",title:"Editar Dados",onClick:()=>alert("Funcionalidade de edição em breve"),children:[(0,b.jsx)(v.Edit,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Editar"})]}),"INATIVO"!==n.status&&(0,b.jsx)(e.Button,{variant:"destructive",size:"icon",title:"Inativar Colaborador",onClick:S,children:(0,b.jsx)(w,{className:"h-4 w-4"})})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"flex gap-1 border-b overflow-x-auto pb-0",children:["personal","professional","schedule","point","documents","legal","audit"].map(a=>(0,b.jsxs)("button",{onClick:()=>D(a),className:`px-4 py-3 text-sm font-medium rounded-t-lg transition-colors border-b-2 ${C===a?"bg-white border-blue-600 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:bg-slate-50"}`,children:["personal"===a&&"Dados Pessoais","professional"===a&&"Dados Profissionais","schedule"===a&&"Jornada","point"===a&&"Ponto","documents"===a&&"Documentos","legal"===a&&"Resumo Legal","audit"===a&&"Auditoria"]},a))}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-b-lg rounded-tr-lg border shadow-sm min-h-[400px]",children:["personal"===C&&(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Nome Completo"}),(0,b.jsx)(f.Input,{value:n.name,readOnly:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"CPF"}),(0,b.jsx)(f.Input,{value:n.cpf,readOnly:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"RG"}),(0,b.jsx)(f.Input,{value:n.rg||"-",readOnly:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Data de Nascimento"}),(0,b.jsx)(f.Input,{value:n.birthDate?new Date(n.birthDate).toLocaleDateString():"-",readOnly:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Telefone"}),(0,b.jsx)(f.Input,{value:n.phone||"-",readOnly:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"E-mail Pessoal"}),(0,b.jsx)(f.Input,{value:n.email||"-",readOnly:!0})]}),(0,b.jsxs)("div",{className:"col-span-2 space-y-2",children:[(0,b.jsx)(g.Label,{children:"Endereço"}),(0,b.jsx)(f.Input,{value:n.address||"-",readOnly:!0})]})]}),"professional"===C&&(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Empresa / Cliente"}),(0,b.jsx)(f.Input,{value:n.contract?.client?.name||"-",readOnly:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Contrato"}),(0,b.jsx)(f.Input,{value:n.contract?.name||"-",readOnly:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Cargo"}),(0,b.jsx)(f.Input,{value:n.position,readOnly:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Função"}),(0,b.jsx)(f.Input,{value:n.function||"-",readOnly:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Departamento"}),(0,b.jsx)(f.Input,{value:n.department||"-",readOnly:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Data de Admissão"}),(0,b.jsx)(f.Input,{value:new Date(n.admissionDate).toLocaleDateString(),readOnly:!0})]})]}),"schedule"===C&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Nome da Escala"}),(0,b.jsx)(f.Input,{value:n.schedule?.name||"Padrão",readOnly:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Tipo"}),(0,b.jsx)(f.Input,{value:n.schedule?.type||"-",readOnly:!0})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-4 p-4 bg-slate-50 rounded-lg border",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-xs text-muted-foreground uppercase font-bold",children:"Entrada"}),(0,b.jsx)("p",{className:"font-mono text-lg",children:n.schedule?.startTime||"08:00"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-xs text-muted-foreground uppercase font-bold",children:"Saída Almoço"}),(0,b.jsx)("p",{className:"font-mono text-lg",children:n.schedule?.lunchStart||"12:00"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-xs text-muted-foreground uppercase font-bold",children:"Volta Almoço"}),(0,b.jsx)("p",{className:"font-mono text-lg",children:n.schedule?.lunchEnd||"13:00"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-xs text-muted-foreground uppercase font-bold",children:"Saída"}),(0,b.jsx)("p",{className:"font-mono text-lg",children:n.schedule?.endTime||"17:00"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-slate-50 rounded border",children:[(0,b.jsx)(m.ShieldCheck,{className:"h-4 w-4 text-green-600"}),(0,b.jsxs)("span",{className:"text-sm",children:["Exigir Foto: ",n.requirePhoto?"Sim":"Não"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-slate-50 rounded border",children:[(0,b.jsx)(l.MapPin,{className:"h-4 w-4 text-green-600"}),(0,b.jsxs)("span",{className:"text-sm",children:["Exigir GPS: ",n.requireGPS?"Sim":"Não"]})]})]})]}),"point"===C&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("h3",{className:"text-lg font-medium",children:"Histórico de Registros"}),(0,b.jsx)(e.Button,{variant:"outline",size:"sm",children:"Exportar Relatório"})]}),(0,b.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,b.jsxs)(i.Table,{children:[(0,b.jsx)(i.TableHeader,{children:(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableHead,{children:"Data/Hora"}),(0,b.jsx)(i.TableHead,{children:"Tipo"}),(0,b.jsx)(i.TableHead,{children:"Localização"}),(0,b.jsx)(i.TableHead,{children:"Precisão"}),(0,b.jsx)(i.TableHead,{children:"Evidência"}),(0,b.jsx)(i.TableHead,{children:"Status"})]})}),(0,b.jsx)(i.TableBody,{children:G?(0,b.jsx)(i.TableRow,{children:(0,b.jsx)(i.TableCell,{colSpan:6,className:"text-center py-8",children:"Carregando registros..."})}):0===E.length?(0,b.jsx)(i.TableRow,{children:(0,b.jsx)(i.TableCell,{colSpan:6,className:"text-center py-8",children:"Nenhum registro encontrado."})}):E.map(a=>(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableCell,{className:"font-mono",children:new Date(a.timestamp).toLocaleString()}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(h.Badge,{variant:"outline",children:a.type})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsxs)("div",{className:"flex flex-col text-xs",children:[(0,b.jsx)("span",{className:"truncate max-w-[200px]",title:a.address,children:a.address||"Sem endereço"}),(0,b.jsxs)("span",{className:"text-muted-foreground",children:[a.latitude?.toFixed(5),", ",a.longitude?.toFixed(5)]})]})}),(0,b.jsx)(i.TableCell,{children:a.accuracy?`${Math.round(a.accuracy)}m`:"-"}),(0,b.jsx)(i.TableCell,{children:a.photoUrl?(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,b.jsx)(p,{className:"h-4 w-4 text-blue-600"})}):"-"}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(h.Badge,{className:"APROVADO"===a.status?"bg-green-600":"PENDENTE"===a.status?"bg-yellow-600":"FORA_DA_AREA"===a.status?"bg-red-600":"bg-slate-600",children:a.status})})]},a.id))})]})})]}),"documents"===C&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("h3",{className:"text-lg font-medium",children:"Documentos Digitais"}),(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",className:"gap-2",children:[(0,b.jsx)(q.Upload,{className:"h-4 w-4"})," Upload de Documento"]})]}),n.documents&&n.documents.length>0?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.documents.map(a=>(0,b.jsxs)("div",{className:"p-4 border rounded-lg flex items-start gap-4 hover:bg-slate-50 transition-colors",children:[(0,b.jsx)("div",{className:"p-2 bg-blue-100 rounded text-blue-600",children:(0,b.jsx)(k.FileText,{className:"h-6 w-6"})}),(0,b.jsxs)("div",{className:"flex-1 overflow-hidden",children:[(0,b.jsx)("p",{className:"font-medium truncate",title:a.name,children:a.name}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.type}),(0,b.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:new Date(a.createdAt).toLocaleDateString()})]}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",title:"Baixar",children:(0,b.jsx)(r.FileDown,{className:"h-4 w-4 text-slate-500"})})]},a.id))}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-slate-400 border-2 border-dashed rounded-lg",children:[(0,b.jsx)(k.FileText,{className:"h-12 w-12 mb-4 opacity-20"}),(0,b.jsx)("p",{children:"Nenhum documento anexado."}),(0,b.jsx)(e.Button,{variant:"outline",className:"mt-4",children:"Upload de Documento"})]})]}),"legal"===C&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Resumo Legal & Inconsistências"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,b.jsxs)("div",{className:"p-4 bg-slate-50 border rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Horas Trabalhadas"}),(0,b.jsxs)("p",{className:"text-2xl font-bold",children:[M?.horas_trabalhadas||0,"h"]}),(0,b.jsx)("p",{className:"text-xs text-green-600",children:"No período atual"})]}),(0,b.jsxs)("div",{className:"p-4 bg-slate-50 border rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Horas Extras"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-orange-600",children:[M?.horas_extras||0,"h"]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"50% e 100%"})]}),(0,b.jsxs)("div",{className:"p-4 bg-slate-50 border rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Atrasos / Faltas"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-red-600",children:[M?M.faltas+M.atrasos:0,"h"]}),(0,b.jsx)("p",{className:"text-xs text-green-600",children:"Regular"})]}),(0,b.jsxs)("div",{className:"p-4 bg-slate-50 border rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Banco de Horas"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:[M?.banco_horas_saldo>0?"+":"",M?.banco_horas_saldo||0,"h"]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Saldo"})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"font-medium text-sm text-muted-foreground uppercase",children:"Status de Compliance"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-green-50 border-green-200",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(t.CheckCircle,{className:"h-5 w-5 text-green-600"}),(0,b.jsx)("span",{children:"Documentação Obrigatória"})]}),(0,b.jsx)(h.Badge,{className:"bg-green-600",children:"Em dia"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-green-50 border-green-200",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(t.CheckCircle,{className:"h-5 w-5 text-green-600"}),(0,b.jsx)("span",{children:"Jornada de Trabalho"})]}),(0,b.jsx)(h.Badge,{className:"bg-green-600",children:"Regular"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-yellow-50 border-yellow-200",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(s.AlertTriangle,{className:"h-5 w-5 text-yellow-600"}),(0,b.jsx)("span",{children:"Intervalo Interjornada"})]}),(0,b.jsx)(h.Badge,{className:"bg-yellow-600",children:"Atenção"})]})]})]})]}),"audit"===C&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Logs de Auditoria"}),(0,b.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,b.jsxs)(i.Table,{children:[(0,b.jsx)(i.TableHeader,{children:(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableHead,{children:"Data/Hora"}),(0,b.jsx)(i.TableHead,{children:"Usuário"}),(0,b.jsx)(i.TableHead,{children:"Ação"}),(0,b.jsx)(i.TableHead,{children:"Detalhes"})]})}),(0,b.jsx)(i.TableBody,{children:K?(0,b.jsx)(i.TableRow,{children:(0,b.jsx)(i.TableCell,{colSpan:4,className:"text-center py-8",children:"Carregando logs..."})}):0===I.length?(0,b.jsx)(i.TableRow,{children:(0,b.jsx)(i.TableCell,{colSpan:4,className:"text-center py-8 text-muted-foreground",children:"Nenhum registro encontrado"})}):I.map(a=>(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableCell,{className:"font-mono text-sm",children:new Date(a.createdAt||a.timestamp).toLocaleString()}),(0,b.jsx)(i.TableCell,{className:"font-medium",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(u.User,{className:"h-4 w-4 text-muted-foreground"}),a.user?.name||"Sistema"]})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(h.Badge,{variant:"outline",children:a.action})}),(0,b.jsx)(i.TableCell,{className:"text-muted-foreground",children:a.details})]},a.id))})]})})]})]})]})]}):(0,b.jsx)("div",{className:"p-8 text-center",children:"Colaborador não encontrado"})}a.s(["default",()=>z],69775)}];

//# sourceMappingURL=cce54_projects_NO%20PONTO_apps_web_src_app_admin_colaboradores_%5Bid%5D_page_tsx_a9f48b7d._.js.map