module.exports=[46190,a=>{"use strict";var b=a.i(92713),c=a.i(98209),d=a.i(48947),e=a.i(32623),f=a.i(1833),g=a.i(57710),h=a.i(14879),i=a.i(51378),j=a.i(39287),k=a.i(9289),l=a.i(11502),m=a.i(17588),n=a.i(12065);let o=(0,a.i(99601).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var p=a.i(49202),q=a.i(39789),r=a.i(52940);let s=[{id:1,title:"Dados da Empresa"},{id:2,title:"Plano e Cobrança"},{id:3,title:"Unidades / Postos"},{id:4,title:"Usuário Administrador"},{id:5,title:"Documentos"}];function t(){let a=(0,r.useRouter)(),[t,u]=(0,c.useState)(1),[v,w]=(0,c.useState)({name:"",tradeName:"",cnpj:"",address:"",stateRegistration:"",financialContact:"",operationalContact:"",plan:"PRO",price:"29.90",quantity:"10",billingCycle:"MENSAL",units:[],adminName:"",adminEmail:""}),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(null),B=(a,b,c)=>{let d=[...v.units];d[a]={...d[a],[b]:c},w({...v,units:d})},C=async()=>{y(!0),A(null);try{let b={name:v.name,tradeName:v.tradeName,cnpj:v.cnpj,address:v.address,stateRegistration:v.stateRegistration,financialContact:v.financialContact,operationalContact:v.operationalContact,plan:v.plan,price:parseFloat(v.price),quantity:parseInt(v.quantity),billingCycle:v.billingCycle,units:v.units.map(a=>({...a,latitude:parseFloat(a.latitude),longitude:parseFloat(a.longitude),radius:parseInt(a.radius)})),adminUser:{name:v.adminName,email:v.adminEmail}},c=await fetch("http://localhost:4000/clientes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(!c.ok){let a=await c.json();throw Error(a.message||"Erro ao criar cliente")}a.push("/admin/clients")}catch(a){A(a.message)}finally{y(!1)}};return(0,b.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,b.jsx)(q.default,{href:"/admin/clients",children:(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(j.ArrowLeft,{className:"h-4 w-4"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Novo Cliente"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Cadastre uma nova empresa no sistema."})]})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute top-1/2 left-0 w-full h-1 bg-slate-100 -translate-y-1/2"}),(0,b.jsx)("div",{className:"relative flex justify-between",children:s.map(a=>(0,b.jsxs)("div",{className:"flex flex-col items-center gap-2 bg-white z-10 px-2",children:[(0,b.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium transition-colors ${t>=a.id?"bg-slate-900 text-white":"bg-slate-100 text-slate-500"}`,children:t>a.id?(0,b.jsx)(l.Check,{className:"h-4 w-4"}):a.id}),(0,b.jsx)("span",{className:`text-xs font-medium ${t>=a.id?"text-slate-900":"text-slate-500"}`,children:a.title})]},a.id))})]}),(0,b.jsx)(g.Card,{children:(0,b.jsxs)(g.CardContent,{className:"pt-6",children:[z&&(0,b.jsxs)(i.Alert,{variant:"destructive",className:"mb-6",children:[(0,b.jsx)(n.AlertCircle,{className:"h-4 w-4"}),(0,b.jsx)(i.AlertTitle,{children:"Erro"}),(0,b.jsx)(i.AlertDescription,{children:z})]}),1===t&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{children:"Razão Social"}),(0,b.jsx)(e.Input,{value:v.name,onChange:a=>w({...v,name:a.target.value}),placeholder:"Ex: Minha Empresa LTDA"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{children:"Nome Fantasia"}),(0,b.jsx)(e.Input,{value:v.tradeName,onChange:a=>w({...v,tradeName:a.target.value}),placeholder:"Ex: Minha Empresa"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{children:"CNPJ"}),(0,b.jsx)(e.Input,{value:v.cnpj,onChange:a=>w({...v,cnpj:a.target.value}),placeholder:"00.000.000/0000-00"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{children:"Inscrição Estadual"}),(0,b.jsx)(e.Input,{value:v.stateRegistration,onChange:a=>w({...v,stateRegistration:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{children:"Endereço Completo"}),(0,b.jsx)(e.Input,{value:v.address,onChange:a=>w({...v,address:a.target.value})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{children:"Contato Financeiro"}),(0,b.jsx)(e.Input,{value:v.financialContact,onChange:a=>w({...v,financialContact:a.target.value}),placeholder:"Nome / Email / Telefone"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{children:"Contato Operacional"}),(0,b.jsx)(e.Input,{value:v.operationalContact,onChange:a=>w({...v,operationalContact:a.target.value}),placeholder:"Nome / Email / Telefone"})]})]})]}),2===t&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{children:"Plano SaaS"}),(0,b.jsxs)(h.Select,{value:v.plan,onValueChange:a=>w({...v,plan:a}),children:[(0,b.jsx)(h.SelectTrigger,{children:(0,b.jsx)(h.SelectValue,{})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"BASIC",children:"Basic"}),(0,b.jsx)(h.SelectItem,{value:"PRO",children:"Pro"}),(0,b.jsx)(h.SelectItem,{value:"ENTERPRISE",children:"Enterprise"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{children:"Ciclo de Cobrança"}),(0,b.jsxs)(h.Select,{value:v.billingCycle,onValueChange:a=>w({...v,billingCycle:a}),children:[(0,b.jsx)(h.SelectTrigger,{children:(0,b.jsx)(h.SelectValue,{})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"MENSAL",children:"Mensal"}),(0,b.jsx)(h.SelectItem,{value:"ANUAL",children:"Anual"})]})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{children:"Quantidade Contratada (Vidas)"}),(0,b.jsx)(e.Input,{type:"number",value:v.quantity,onChange:a=>w({...v,quantity:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{children:"Valor Unitário (R$)"}),(0,b.jsx)(e.Input,{type:"number",step:"0.01",value:v.price,onChange:a=>w({...v,price:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"bg-slate-50 p-4 rounded-lg",children:[(0,b.jsx)("h3",{className:"font-semibold mb-2",children:"Resumo da Cobrança"}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsxs)("span",{children:["Total Estimado (",v.billingCycle,"):"]}),(0,b.jsxs)("span",{className:"font-bold",children:["R$ ",(parseFloat(v.price||"0")*parseInt(v.quantity||"0")).toFixed(2)]})]})]})]}),3===t&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)(f.Label,{children:"Unidades / Postos de Trabalho Iniciais"}),(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",onClick:()=>{w({...v,units:[...v.units,{name:"",address:"",latitude:"0",longitude:"0",radius:"50"}]})},className:"gap-2",children:[(0,b.jsx)(p.Plus,{className:"h-4 w-4"}),"Adicionar Unidade"]})]}),0===v.units.length?(0,b.jsx)("div",{className:"text-center py-8 border-2 border-dashed rounded-lg text-muted-foreground",children:"Nenhuma unidade adicionada. Clique em adicionar para cadastrar postos."}):(0,b.jsx)("div",{className:"space-y-4",children:v.units.map((a,c)=>(0,b.jsxs)("div",{className:"p-4 border rounded-lg relative space-y-3",children:[(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>{let a;(a=[...v.units]).splice(c,1),w({...v,units:a})},children:(0,b.jsx)(o,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{children:"Nome da Unidade"}),(0,b.jsx)(e.Input,{value:a.name,onChange:a=>B(c,"name",a.target.value),placeholder:"Ex: Matriz, Filial RJ"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{children:"Endereço"}),(0,b.jsx)(e.Input,{value:a.address,onChange:a=>B(c,"address",a.target.value)})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{children:"Latitude"}),(0,b.jsx)(e.Input,{value:a.latitude,onChange:a=>B(c,"latitude",a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{children:"Longitude"}),(0,b.jsx)(e.Input,{value:a.longitude,onChange:a=>B(c,"longitude",a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{children:"Raio (m)"}),(0,b.jsx)(e.Input,{type:"number",value:a.radius,onChange:a=>B(c,"radius",a.target.value)})]})]})]},c))})]}),4===t&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 mb-4",children:(0,b.jsx)("p",{className:"text-sm text-blue-800",children:"O usuário administrador receberá um e-mail com as credenciais de acesso. A senha temporária padrão será enviada."})}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{children:"Nome do Administrador"}),(0,b.jsx)(e.Input,{value:v.adminName,onChange:a=>w({...v,adminName:a.target.value}),placeholder:"Nome completo"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{children:"E-mail de Acesso"}),(0,b.jsx)(e.Input,{type:"email",value:v.adminEmail,onChange:a=>w({...v,adminEmail:a.target.value}),placeholder:"admin@cliente.com"})]})]}),5===t&&(0,b.jsxs)("div",{className:"text-center py-10 space-y-4",children:[(0,b.jsx)("div",{className:"h-16 w-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto",children:(0,b.jsx)(m.Upload,{className:"h-8 w-8 text-slate-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-lg",children:"Upload de Documentos"}),(0,b.jsx)("p",{className:"text-muted-foreground max-w-sm mx-auto",children:"Arraste e solte o Contrato Social e outros documentos aqui, ou clique para selecionar."})]}),(0,b.jsx)(d.Button,{variant:"outline",className:"mt-4",children:"Selecionar Arquivos"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground pt-4",children:"* Funcionalidade de upload será habilitada após a criação do registro."})]}),(0,b.jsxs)("div",{className:"flex justify-between mt-8 pt-4 border-t",children:[(0,b.jsxs)(d.Button,{variant:"outline",onClick:()=>{t>1&&u(t-1)},disabled:1===t||x,children:[(0,b.jsx)(j.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Voltar"]}),(0,b.jsxs)(d.Button,{onClick:()=>{t<s.length?u(t+1):C()},disabled:x,className:5===t?"bg-green-600 hover:bg-green-700":"",children:[x?"Processando...":5===t?"Finalizar Cadastro":"Próximo",5!==t&&(0,b.jsx)(k.ArrowRight,{className:"h-4 w-4 ml-2"})]})]})]})})]})}a.s(["default",()=>t],46190)}];

//# sourceMappingURL=80b94_trae_projects_NO%20PONTO_apps_web_src_app_admin_clients_new_page_tsx_40323461._.js.map